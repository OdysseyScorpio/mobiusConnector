 db.restaurants.find({"Factions": {$elemMatch:{Name:"Pilots Federation Local Branch"}}},{"Factions":1}).pretty()



 db.mobius.find({Factions:{$elemMatch:{Name:"Pilots Federation Local Branch"}}},{StarSystem:1,timestamp:1,"Factions.$":1,_id:0}).sort({timestamp:-1}).pretty()





mongo 127.0.0.1/mobius --eval "var c = db.mobius.find({Factions:{$elemMatch:{Name:{"$regex":"obius"}}}},{StarSystem:1,"Factions.Influence.$":1,_id:0}).sort({timestamp:-1}).pretty()" >> test.txt


 mongo 127.0.0.1/db --eval "var c = db.mobius.find({Factions:{$elemMatch:{Name:{"$regex":"obius"}}}},{StarSystem:1,"Factions.Influence.$":1,_id:0}).sort({timestamp:-1}).pretty()" >> test.txt



 db.mobius.find({Factions:{$elemMatch:{Name:{"$regex":"obius"}}}},{StarSystem:1,"Factions.Influence.$":1,_id:0}).sort({timestamp:-1}).pretty()



db.mobius.find({Factions:{$elemMatch:{StarSystem:{"$regex":"Azrael"}}}},{StarSystem:1,"Factions.Influence.$":1,_id:0}).sort({timestamp:-1}).pretty() >> "output-Azrael.txt"
db.mobius.find({Factions:{$elemMatch:{StarSystem:{"$regex":"Apathaam"}}}},{StarSystem:1,"Factions.Influence.$":1,_id:0}).sort({timestamp:-1}).pretty() >> "output-Apathaam.txt"
db.mobius.find({Factions:{$elemMatch:{StarSystem:{"$regex":"Exioce"}}}},{StarSystem:1,"Factions.Influence.$":1,_id:0}).sort({timestamp:-1}).pretty() >> "output-Exioce.txt"



 db.mobius.find({$and:[ { $or:[ {StarSystem:{"$in":["Azrael","Apathaam","Exioce"]}}]}, {Factions:{$elemMatch:{Name:{"$regex":"obius"}}}}] },{StarSystem:1,"Factions":1,_id:0}).sort({timestamp:-1}).pretty()


 mongo 127.0.0.1/mobius --eval 'db.mobius.find({$and:[ { $or:[ {StarSystem:{"$in":["Azrael","Apathaam","Exioce"]}}]}, {Factions:{$elemMatch:{Name:{"$regex":"obius"}}}}] },{StarSystem:1,"Factions.$":1,_id:0}).sort({timestamp:-1}).pretty()' 


 mongoimport --db mobuis --collection mobius --file new.json